# CWMS Access Management Environment Configuration
# Copy this file to .env and customize: cp .env.example .env

# Server Configuration
NODE_ENV=development
PORT=3001
HOST=0.0.0.0
LOG_LEVEL=debug

# CWMS Data API Configuration
CWMS_API_URL=http://data-api:7000/cwms-data
CWMS_API_TIMEOUT=30000

# OPA Configuration
OPA_URL=http://opa:8181
OPA_POLICY_PATH=/v1/data/cwms/authz/allow

# Keycloak Configuration
KEYCLOAK_URL=http://auth:8080/auth
KEYCLOAK_ADMIN_USER=admin
KEYCLOAK_ADMIN_PASSWORD=admin

# Redis Configuration
REDIS_URL=redis://redis:6379

# Authorization
BYPASS_AUTH=false

# Cache Configuration
CACHE_TTL_SECONDS=300
CACHE_MAX_SIZE=1000

# OPA Whitelist - which endpoints require OPA authorization
# Use ./scripts/load-whitelist.sh to load from opa-whitelist.json
OPA_WHITELIST_ENDPOINTS=["/cwms-data/timeseries","/cwms-data/offices"]

# Docker Compose Port Mappings
MANAGEMENT_UI_PORT=4200
MANAGEMENT_API_PORT=3002
AUTHORIZER_PROXY_PORT=3001
REDIS_PORT=6379
OPA_PORT=8181
NETWORK_NAME=cwmsdb_net

# Management UI Configuration
VITE_API_URL=http://localhost:3002

# Management CLI Configuration
MANAGEMENT_API_URL=http://localhost:3002
